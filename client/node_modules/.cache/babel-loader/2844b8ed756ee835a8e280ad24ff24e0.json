{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Colby\\\\Documents\\\\school\\\\Semester 3\\\\Sprints\\\\Sprint Three\\\\Project One\\\\contact-book\\\\client\\\\src\\\\components\\\\pages\\\\SearchPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container, InputGroup, Dropdown, DropdownButton, FormControl as FormControlBoot } from 'react-bootstrap';\nimport { Button, FormGroup, IconButton, Paper, Switch } from '@material-ui/core';\nimport ListSearches from '../page components/ListSearches';\nimport NavBar from '../page components/NavBar';\nimport decode from 'jsonwebtoken';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport { FormControl, Radio, RadioGroup, FormControlLabel, FormLabel } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction SearchPage({\n  history\n}) {\n  _s();\n\n  // const [user, setUser] = useState(\"\")\n  const [search, setSearch] = useState(\"\");\n  const [searchTerm, setSearchTerm] = useState();\n  const [database, setDatabase] = useState(\"Database\");\n  const [filterOpen, setFilterOpen] = useState(false);\n  const [radio, setRadio] = useState('firstname');\n  useEffect(() => {\n    if (!localStorage.getItem(\"authToken\")) {\n      history.push(\"/login\");\n    }\n\n    if (decode.TokenExpiredError) {\n      history.push(\"/login\");\n    }\n  }, [history]);\n\n  const getAllContacts = async () => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\n      }\n    };\n\n    if (database === \"PostgreSQL\") {\n      await axios.all([axios.post(\"/api/private/search/postgresql\", {\n        searchTerm: search,\n        searchQuery: radio\n      }, config), axios.post(\"/api/private/log/search\", {\n        user: \"TEST USER\",\n        searchTerm: search,\n        searchQuery: radio,\n        database: database\n      }, config)]).then(axios.spread((data1, data2) => {\n        setSearchTerm(data1.data.rows);\n        throw data2;\n      }));\n    }\n\n    if (database === \"MongoDB\") {\n      await axios.all([axios.post(\"/api/private/search/mongodb\", {\n        searchTerm: search,\n        searchQuery: radio\n      }, config), axios.post(\"/api/private/log/search\", {\n        user: \"TEST USER\",\n        searchTerm: search,\n        searchQuery: radio,\n        database: database\n      }, config)]).then(axios.spread((data1, data2) => {\n        setSearchTerm(data1.data);\n        throw data2;\n      }));\n    }\n\n    if (database === \"Both\") {\n      await axios.all([axios.post(\"/api/private/search/postgresql\", {\n        searchTerm: search,\n        searchQuery: radio\n      }, config), axios.post(\"/api/private/search/mongodb\", {\n        searchTerm: search,\n        searchQuery: radio\n      }, config), axios.post(\"/api/private/log/search\", {\n        user: \"TEST USER\",\n        searchTerm: search,\n        searchQuery: radio,\n        database: database\n      }, config)]).then(axios.spread((data1, data2, data3) => {\n        // combines both array's\n        Array.prototype.push.apply(data1.data.rows, data2.data);\n        setSearchTerm(data1.data.rows);\n        throw data3;\n      }));\n    }\n\n    if (database === \"Database\") {\n      return alert(\"No Database Selected!\");\n    }\n  };\n\n  function filterOpenFunc() {\n    if (filterOpen === true) {\n      setFilterOpen(false);\n    } else {\n      setFilterOpen(true);\n    }\n  }\n\n  const handleChange = event => {\n    setRadio(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt-5\",\n      children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(DropdownButton, {\n          variant: \"outline-secondary\",\n          title: database,\n          id: \"input-group-dropdown-1\",\n          children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            href: \"#\",\n            onClick: () => setDatabase(\"PostgreSQL\"),\n            children: \"PostgreSQL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            href: \"#\",\n            onClick: () => setDatabase(\"MongoDB\"),\n            children: \"MongoDB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            href: \"#\",\n            onClick: () => setDatabase(\"Both\"),\n            children: \"Both\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormControlBoot, {\n          \"aria-label\": \"Text input with dropdown button\",\n          placeholder: \"Search...\",\n          onChange: e => setSearch(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: getAllContacts,\n          variant: \"contained\",\n          color: \"primary\",\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"filter\",\n          onClick: () => filterOpenFunc(),\n          children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), filterOpen ? /*#__PURE__*/_jsxDEV(Paper, {\n        style: {\n          position: \"relative\",\n          width: \"320px\",\n          height: \"200px\",\n          marginLeft: \"37%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(FormControl, {\n          component: \"fieldset\",\n          style: {\n            marginTop: \"15px\",\n            marginLeft: \"15px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n            component: \"legend\",\n            children: \"Filter By:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n            \"aria-label\": \"filter\",\n            name: \"filterby\",\n            value: radio,\n            onChange: handleChange,\n            style: {\n              height: \"250px\",\n              marginTop: \"-10px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"firstname\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 71\n              }, this),\n              label: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"lastname\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 69\n              }, this),\n              label: \"Last Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"email\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 66\n              }, this),\n              label: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"company\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 68\n              }, this),\n              label: \"Company\",\n              style: {\n                marginLeft: \"150px\",\n                marginTop: \"-128px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"department\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 71\n              }, this),\n              label: \"Department\",\n              style: {\n                marginLeft: \"150px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"jobtitle\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 69\n              }, this),\n              label: \"Job Title\",\n              style: {\n                marginLeft: \"150px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"phone\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 66\n              }, this),\n              label: \"Phone\",\n              style: {\n                marginTop: \"3px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: searchTerm ? /*#__PURE__*/_jsxDEV(ListSearches, {\n        searchTerm: searchTerm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 60\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(SearchPage, \"C1/jzpfk/Efd3fsvRVUqxD4QqTk=\");\n\n_c = SearchPage;\nexport default SearchPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"sources":["C:/Users/Colby/Documents/school/Semester 3/Sprints/Sprint Three/Project One/contact-book/client/src/components/pages/SearchPage.js"],"names":["React","useState","useEffect","axios","Container","InputGroup","Dropdown","DropdownButton","FormControl","FormControlBoot","Button","FormGroup","IconButton","Paper","Switch","ListSearches","NavBar","decode","MoreVertIcon","Radio","RadioGroup","FormControlLabel","FormLabel","SearchPage","history","search","setSearch","searchTerm","setSearchTerm","database","setDatabase","filterOpen","setFilterOpen","radio","setRadio","localStorage","getItem","push","TokenExpiredError","getAllContacts","config","headers","Authorization","all","post","searchQuery","user","then","spread","data1","data2","data","rows","data3","Array","prototype","apply","alert","filterOpenFunc","handleChange","event","target","value","e","position","width","height","marginLeft","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { Container, InputGroup, Dropdown, DropdownButton, FormControl as FormControlBoot } from 'react-bootstrap'\r\nimport {Button, FormGroup, IconButton, Paper, Switch} from '@material-ui/core'\r\nimport ListSearches from '../page components/ListSearches'\r\nimport NavBar from '../page components/NavBar'\r\nimport decode from 'jsonwebtoken'\r\n\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\n\r\nimport { FormControl, Radio, RadioGroup, FormControlLabel, FormLabel } from '@material-ui/core';\r\n\r\nfunction SearchPage({history}) {\r\n    // const [user, setUser] = useState(\"\")\r\n    const [search, setSearch] = useState(\"\")\r\n    const [searchTerm, setSearchTerm] = useState()\r\n    const [database, setDatabase] = useState(\"Database\")\r\n    const [filterOpen, setFilterOpen] = useState(false)\r\n    const [radio, setRadio] = useState('firstname');\r\n\r\n    useEffect(()=> {\r\n        if(!localStorage.getItem(\"authToken\")) {\r\n            history.push(\"/login\")\r\n        }\r\n\r\n        if(decode.TokenExpiredError) {\r\n            history.push(\"/login\")\r\n        }\r\n\r\n    }, [history])\r\n\r\n    const getAllContacts = async () => {\r\n        const config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\r\n            }\r\n        }\r\n        if (database === \"PostgreSQL\") {\r\n            await axios.all([\r\n                axios.post(\"/api/private/search/postgresql\", {\r\n                searchTerm: search,\r\n                searchQuery: radio\r\n                }, config),\r\n                axios.post(\"/api/private/log/search\",{\r\n                    user: \"TEST USER\",\r\n                    searchTerm: search,\r\n                    searchQuery: radio,\r\n                    database: database\r\n                }, config)\r\n        ]).then(axios.spread((data1, data2) => {\r\n            setSearchTerm(data1.data.rows)\r\n            throw data2\r\n        }))} \r\n         if (database === \"MongoDB\") {\r\n            await axios.all([\r\n                axios.post(\"/api/private/search/mongodb\", {\r\n                searchTerm: search,\r\n                searchQuery: radio\r\n                }, config),\r\n                axios.post(\"/api/private/log/search\",{\r\n                    user: \"TEST USER\",\r\n                    searchTerm: search,\r\n                    searchQuery: radio,\r\n                    database: database\r\n                }, config)\r\n        ]).then(axios.spread((data1, data2) => {\r\n            setSearchTerm(data1.data)\r\n            throw data2\r\n        }))} \r\n        if (database === \"Both\") {\r\n            await axios.all([\r\n                axios.post(\"/api/private/search/postgresql\", {\r\n                        searchTerm: search,\r\n                        searchQuery: radio\r\n                    }, config),\r\n                axios.post(\"/api/private/search/mongodb\", {\r\n                        searchTerm: search,\r\n                        searchQuery: radio\r\n                    }, config),\r\n                axios.post(\"/api/private/log/search\", {\r\n                    user: \"TEST USER\",\r\n                    searchTerm: search,\r\n                    searchQuery: radio,\r\n                    database: database                    \r\n                }, config)\r\n            ]).then(axios.spread((data1, data2, data3)=> {\r\n                // combines both array's\r\n                Array.prototype.push.apply(data1.data.rows, data2.data);\r\n                setSearchTerm(data1.data.rows)\r\n                throw data3\r\n            }))\r\n        } if (database === \"Database\") {\r\n            return (\r\n                alert(\"No Database Selected!\")\r\n            )\r\n        }\r\n\r\n    }\r\n\r\n    function filterOpenFunc() {\r\n        if (filterOpen === true) {\r\n            setFilterOpen(false)\r\n        } else {\r\n            setFilterOpen(true)\r\n        }\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        setRadio(event.target.value);\r\n      };\r\n\r\n    return (\r\n        <>\r\n        <NavBar/>\r\n        <Container className=\"mt-5\">\r\n        <InputGroup className=\"mb-3\">\r\n            <DropdownButton\r\n            variant=\"outline-secondary\"\r\n            title={database}\r\n            id=\"input-group-dropdown-1\"\r\n            >\r\n            <Dropdown.Item href=\"#\" onClick={() => setDatabase(\"PostgreSQL\")}>PostgreSQL</Dropdown.Item>\r\n            <Dropdown.Item href=\"#\" onClick={() => setDatabase(\"MongoDB\")}>MongoDB</Dropdown.Item>\r\n            <Dropdown.Item href=\"#\" onClick={() => setDatabase(\"Both\")}>Both</Dropdown.Item>\r\n            </DropdownButton>\r\n            <FormControlBoot aria-label=\"Text input with dropdown button\" placeholder=\"Search...\" onChange={(e)=> setSearch(e.target.value)}/> \r\n            <Button onClick={getAllContacts} variant=\"contained\" color=\"primary\">Search</Button>\r\n            <IconButton aria-label=\"filter\" onClick={() => filterOpenFunc()}>\r\n                <MoreVertIcon />\r\n            </IconButton>\r\n            </InputGroup>\r\n            {\r\n                filterOpen ? \r\n                <Paper style={{position: \"relative\", width:\"320px\", height:\"200px\", marginLeft: \"37%\"}}>\r\n                    <FormControl component=\"fieldset\" style={{marginTop: \"15px\", marginLeft: \"15px\"}} >\r\n                    <FormLabel component=\"legend\">Filter By:</FormLabel>\r\n                    <RadioGroup  aria-label=\"filter\" name=\"filterby\" value={radio} onChange={handleChange} style={{height: \"250px\", marginTop: \"-10px\"}}>\r\n                        <FormControlLabel  value=\"firstname\" control={<Radio />} label=\"First Name\" />\r\n                        <FormControlLabel value=\"lastname\" control={<Radio  />} label=\"Last Name\" />\r\n                        <FormControlLabel value=\"email\" control={<Radio  />} label=\"Email\" />\r\n                        <FormControlLabel value=\"company\" control={<Radio  />} label=\"Company\"  style={{marginLeft: \"150px\", marginTop: \"-128px\"}} />\r\n                        <FormControlLabel value=\"department\" control={<Radio  />} label=\"Department\" style={{marginLeft: \"150px\"}} />\r\n                        <FormControlLabel value=\"jobtitle\" control={<Radio  />} label=\"Job Title\" style={{marginLeft: \"150px\"}} />\r\n                        <FormControlLabel value=\"phone\" control={<Radio  />} label=\"Phone\" style={{marginTop: \"3px\"}} />\r\n                    </RadioGroup>\r\n                </FormControl>\r\n              </Paper>\r\n                : <p></p>\r\n            }\r\n\r\n        </Container>\r\n        <Container>\r\n            {\r\n                searchTerm ? \r\n                <ListSearches searchTerm={searchTerm} /> : <p></p>\r\n            }\r\n        </Container>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SearchPage\r\n"]},"metadata":{},"sourceType":"module"}