{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Colby\\\\Documents\\\\school\\\\Semester 3\\\\Sprints\\\\Sprint Three\\\\Project One\\\\contact-book\\\\client\\\\src\\\\components\\\\pages\\\\SearchPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container, InputGroup, Dropdown, DropdownButton, FormControl as FormControlBoot } from 'react-bootstrap';\nimport { Button, IconButton, Select, MenuItem, InputLabel } from '@material-ui/core';\nimport ListSearches from '../page components/ListSearches';\nimport NavBar from '../page components/NavBar';\nimport { Button as ButtonBoot, Modal, Form } from \"react-bootstrap\";\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport { FormControl, Radio, RadioGroup, FormControlLabel, FormLabel } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction SearchPage({\n  history\n}) {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [searchTerm, setSearchTerm] = useState();\n  const [database, setDatabase] = useState(\"Database\");\n  const [filterOpen, setFilterOpen] = useState(false);\n  const [radio, setRadio] = useState('firstname');\n  const [databaseColor, setDatabaseColor] = useState(\"outline-secondary\");\n  const [open, setOpen] = useState(false);\n\n  const getCurrentUser = async () => {\n    try {\n      let currentUser = await axios({\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\n        },\n        url: \"http://localhost:5000/api/private/get/currentuser\"\n      });\n      setUsername(currentUser.data.username);\n    } catch (err) {\n      localStorage.removeItem(\"authToken\");\n      window.location = \"/\";\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    getCurrentUser();\n  }, []);\n  useEffect(() => {\n    if (!localStorage.getItem(\"authToken\")) {\n      history.push(\"/login\");\n    }\n  }, [history]);\n\n  const getAllContacts = async () => {\n    if (search === \"\") {\n      alert(\"Not searching anything!\");\n    } else {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\n        }\n      };\n\n      if (database === \"PostgreSQL\") {\n        await axios.all([axios.post(\"/api/private/search/postgresql\", {\n          searchTerm: search,\n          searchQuery: radio\n        }, config), axios.post(\"/api/private/log/search\", {\n          user: username,\n          searchTerm: search,\n          searchQuery: radio,\n          database: database\n        }, config)]).then(axios.spread((data1, data2) => {\n          setSearchTerm(data1.data.rows);\n          throw data2;\n        }));\n      }\n\n      if (database === \"MongoDB\") {\n        await axios.all([axios.post(\"/api/private/search/mongodb\", {\n          searchTerm: search,\n          searchQuery: radio\n        }, config), axios.post(\"/api/private/log/search\", {\n          user: username,\n          searchTerm: search,\n          searchQuery: radio,\n          database: database\n        }, config)]).then(axios.spread((data1, data2) => {\n          setSearchTerm(data1.data);\n          throw data2;\n        }));\n      }\n\n      if (database === \"Both\") {\n        await axios.all([axios.post(\"/api/private/search/postgresql\", {\n          searchTerm: search,\n          searchQuery: radio\n        }, config), axios.post(\"/api/private/search/mongodb\", {\n          searchTerm: search,\n          searchQuery: radio\n        }, config), axios.post(\"/api/private/log/search\", {\n          user: username,\n          searchTerm: search,\n          searchQuery: radio,\n          database: database\n        }, config)]).then(axios.spread((data1, data2, data3) => {\n          // combines both array's\n          Array.prototype.push.apply(data1.data.rows, data2.data);\n          setSearchTerm(data1.data.rows);\n          throw data3;\n        }));\n      }\n\n      if (database === \"Database\") {\n        return alert(\"No Database Selected!\");\n      }\n    }\n  };\n\n  function filterOpenFunc() {\n    if (filterOpen === true) {\n      setFilterOpen(false);\n    } else {\n      setFilterOpen(true);\n    }\n  }\n\n  const handleChange = event => {\n    setRadio(event.target.value);\n    console.log(radio);\n  };\n\n  function openModal() {\n    setOpen(true);\n  }\n\n  function closeModal() {\n    setOpen(false);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n  }\n\n  function handleChanges(e) {\n    console.log(e.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt-5\",\n      children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(DropdownButton, {\n          variant: databaseColor,\n          title: database,\n          id: \"input-group-dropdown-1\",\n          children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            href: \"#\",\n            onClick: () => {\n              setDatabase(\"PostgreSQL\");\n              setDatabaseColor(\"outline-primary\");\n            },\n            children: \"PostgreSQL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            href: \"#\",\n            onClick: () => {\n              setDatabase(\"MongoDB\");\n              setDatabaseColor(\"outline-success\");\n            },\n            children: \"MongoDB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            href: \"#\",\n            onClick: () => {\n              setDatabase(\"Both\");\n              setDatabaseColor(\"outline-warning\");\n            },\n            children: \"Both\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormControlBoot, {\n          \"aria-label\": \"Text input with dropdown button\",\n          placeholder: \"Search...\",\n          onChange: e => setSearch(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: getAllContacts,\n          variant: \"contained\",\n          color: \"primary\",\n          disableElevation: true,\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"filter\",\n          onClick: openModal,\n          children: /*#__PURE__*/_jsxDEV(MoreVertIcon, {\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Modal, {\n          show: open,\n          onHide: closeModal,\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(Modal.Body, {\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                component: \"fieldset\",\n                children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                  component: \"legend\",\n                  children: \"Filter By:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n                  \"aria-label\": \"filter\",\n                  name: \"filterby\",\n                  value: radio,\n                  onChange: handleChange,\n                  children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"firstname\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 75\n                    }, this),\n                    label: \"First Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"lastname\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 196,\n                      columnNumber: 73\n                    }, this),\n                    label: \"Last Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"email\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 197,\n                      columnNumber: 70\n                    }, this),\n                    label: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"phone\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 70\n                    }, this),\n                    label: \"Phone\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"company\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 199,\n                      columnNumber: 72\n                    }, this),\n                    label: \"Company\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"department\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 75\n                    }, this),\n                    label: \"Department\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                    value: \"jobtitle\",\n                    control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 73\n                    }, this),\n                    label: \"Job Title\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n              children: /*#__PURE__*/_jsxDEV(ButtonBoot, {\n                variant: \"success\",\n                type: \"submit\",\n                onClick: closeModal,\n                children: \"Apply\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: searchTerm ? /*#__PURE__*/_jsxDEV(ListSearches, {\n        searchTerm: searchTerm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 60\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(SearchPage, \"FK9adbPnGh0/Xf1p0l/HmrPSIZ0=\");\n\n_c = SearchPage;\nexport default SearchPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"sources":["C:/Users/Colby/Documents/school/Semester 3/Sprints/Sprint Three/Project One/contact-book/client/src/components/pages/SearchPage.js"],"names":["React","useState","useEffect","axios","Container","InputGroup","Dropdown","DropdownButton","FormControl","FormControlBoot","Button","IconButton","Select","MenuItem","InputLabel","ListSearches","NavBar","ButtonBoot","Modal","Form","MoreVertIcon","Radio","RadioGroup","FormControlLabel","FormLabel","SearchPage","history","username","setUsername","search","setSearch","searchTerm","setSearchTerm","database","setDatabase","filterOpen","setFilterOpen","radio","setRadio","databaseColor","setDatabaseColor","open","setOpen","getCurrentUser","currentUser","method","headers","Authorization","localStorage","getItem","url","data","err","removeItem","window","location","console","log","push","getAllContacts","alert","config","all","post","searchQuery","user","then","spread","data1","data2","rows","data3","Array","prototype","apply","filterOpenFunc","handleChange","event","target","value","openModal","closeModal","handleSubmit","e","preventDefault","handleChanges"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,UAApB,EAAgCC,QAAhC,EAA0CC,cAA1C,EAA0DC,WAAW,IAAIC,eAAzE,QAAgG,iBAAhG;AACA,SAAQC,MAAR,EAAgBC,UAAhB,EAA4BC,MAA5B,EAAoCC,QAApC,EAA8CC,UAA9C,QAA+D,mBAA/D;AACA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,SAASN,MAAM,IAAIO,UAAnB,EAA+BC,KAA/B,EAAsCC,IAAtC,QAAkD,iBAAlD;AAEA,OAAOC,YAAP,MAAyB,6BAAzB;AAEA,SAASZ,WAAT,EAAsBa,KAAtB,EAA6BC,UAA7B,EAAyCC,gBAAzC,EAA2DC,SAA3D,QAA4E,mBAA5E;;;;AAEA,SAASC,UAAT,CAAoB;AAACC,EAAAA;AAAD,CAApB,EAA+B;AAAA;;AAE3B,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0B3B,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAAC4B,MAAD,EAASC,SAAT,IAAsB7B,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAAC8B,UAAD,EAAaC,aAAb,IAA8B/B,QAAQ,EAA5C;AACA,QAAM,CAACgC,QAAD,EAAWC,WAAX,IAA0BjC,QAAQ,CAAC,UAAD,CAAxC;AACA,QAAM,CAACkC,UAAD,EAAaC,aAAb,IAA8BnC,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACoC,KAAD,EAAQC,QAAR,IAAoBrC,QAAQ,CAAC,WAAD,CAAlC;AACA,QAAM,CAACsC,aAAD,EAAgBC,gBAAhB,IAAoCvC,QAAQ,CAAC,mBAAD,CAAlD;AACA,QAAM,CAACwC,IAAD,EAAOC,OAAP,IAAkBzC,QAAQ,CAAC,KAAD,CAAhC;;AAEA,QAAM0C,cAAc,GAAG,YAAY;AAC/B,QAAI;AACA,UAAIC,WAAW,GAAG,MAAMzC,KAAK,CAAC;AAC1B0C,QAAAA,MAAM,EAAE,KADkB;AAE1BC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAELC,UAAAA,aAAa,EAAG,UAASC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkC;AAFtD,SAFiB;AAM1BC,QAAAA,GAAG,EAAE;AANqB,OAAD,CAA7B;AASAtB,MAAAA,WAAW,CAACgB,WAAW,CAACO,IAAZ,CAAiBxB,QAAlB,CAAX;AACH,KAXD,CAWE,OAAOyB,GAAP,EAAY;AACVJ,MAAAA,YAAY,CAACK,UAAb,CAAwB,WAAxB;AACAC,MAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACH;AAEJ,GAlBD;;AAoBAlD,EAAAA,SAAS,CAAC,MAAM;AACZyC,IAAAA,cAAc;AACjB,GAFQ,EAEN,EAFM,CAAT;AAIAzC,EAAAA,SAAS,CAAC,MAAK;AACX,QAAG,CAAC8C,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,EAAuC;AACnCvB,MAAAA,OAAO,CAACgC,IAAR,CAAa,QAAb;AACH;AACJ,GAJQ,EAIN,CAAChC,OAAD,CAJM,CAAT;;AAMA,QAAMiC,cAAc,GAAG,YAAY;AAC/B,QAAI9B,MAAM,KAAK,EAAf,EAAmB;AACf+B,MAAAA,KAAK,CAAC,yBAAD,CAAL;AACH,KAFD,MAEO;AACH,YAAMC,MAAM,GAAG;AACXf,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAELC,UAAAA,aAAa,EAAG,UAASC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkC;AAFtD;AADE,OAAf;;AAMA,UAAIhB,QAAQ,KAAK,YAAjB,EAA+B;AAC3B,cAAM9B,KAAK,CAAC2D,GAAN,CAAU,CACZ3D,KAAK,CAAC4D,IAAN,CAAW,gCAAX,EAA6C;AAC7ChC,UAAAA,UAAU,EAAEF,MADiC;AAE7CmC,UAAAA,WAAW,EAAE3B;AAFgC,SAA7C,EAGGwB,MAHH,CADY,EAKZ1D,KAAK,CAAC4D,IAAN,CAAW,yBAAX,EAAqC;AACjCE,UAAAA,IAAI,EAAEtC,QAD2B;AAEjCI,UAAAA,UAAU,EAAEF,MAFqB;AAGjCmC,UAAAA,WAAW,EAAE3B,KAHoB;AAIjCJ,UAAAA,QAAQ,EAAEA;AAJuB,SAArC,EAKG4B,MALH,CALY,CAAV,EAWPK,IAXO,CAWF/D,KAAK,CAACgE,MAAN,CAAa,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACnCrC,UAAAA,aAAa,CAACoC,KAAK,CAACjB,IAAN,CAAWmB,IAAZ,CAAb;AACA,gBAAMD,KAAN;AACH,SAHO,CAXE,CAAN;AAcA;;AACH,UAAIpC,QAAQ,KAAK,SAAjB,EAA4B;AACzB,cAAM9B,KAAK,CAAC2D,GAAN,CAAU,CACZ3D,KAAK,CAAC4D,IAAN,CAAW,6BAAX,EAA0C;AAC1ChC,UAAAA,UAAU,EAAEF,MAD8B;AAE1CmC,UAAAA,WAAW,EAAE3B;AAF6B,SAA1C,EAGGwB,MAHH,CADY,EAKZ1D,KAAK,CAAC4D,IAAN,CAAW,yBAAX,EAAqC;AACjCE,UAAAA,IAAI,EAAEtC,QAD2B;AAEjCI,UAAAA,UAAU,EAAEF,MAFqB;AAGjCmC,UAAAA,WAAW,EAAE3B,KAHoB;AAIjCJ,UAAAA,QAAQ,EAAEA;AAJuB,SAArC,EAKG4B,MALH,CALY,CAAV,EAWPK,IAXO,CAWF/D,KAAK,CAACgE,MAAN,CAAa,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACnCrC,UAAAA,aAAa,CAACoC,KAAK,CAACjB,IAAP,CAAb;AACA,gBAAMkB,KAAN;AACH,SAHO,CAXE,CAAN;AAcA;;AACJ,UAAIpC,QAAQ,KAAK,MAAjB,EAAyB;AACrB,cAAM9B,KAAK,CAAC2D,GAAN,CAAU,CACZ3D,KAAK,CAAC4D,IAAN,CAAW,gCAAX,EAA6C;AACrChC,UAAAA,UAAU,EAAEF,MADyB;AAErCmC,UAAAA,WAAW,EAAE3B;AAFwB,SAA7C,EAGOwB,MAHP,CADY,EAKZ1D,KAAK,CAAC4D,IAAN,CAAW,6BAAX,EAA0C;AAClChC,UAAAA,UAAU,EAAEF,MADsB;AAElCmC,UAAAA,WAAW,EAAE3B;AAFqB,SAA1C,EAGOwB,MAHP,CALY,EASZ1D,KAAK,CAAC4D,IAAN,CAAW,yBAAX,EAAsC;AAClCE,UAAAA,IAAI,EAAEtC,QAD4B;AAElCI,UAAAA,UAAU,EAAEF,MAFsB;AAGlCmC,UAAAA,WAAW,EAAE3B,KAHqB;AAIlCJ,UAAAA,QAAQ,EAAEA;AAJwB,SAAtC,EAKG4B,MALH,CATY,CAAV,EAeHK,IAfG,CAeE/D,KAAK,CAACgE,MAAN,CAAa,CAACC,KAAD,EAAQC,KAAR,EAAeE,KAAf,KAAwB;AACzC;AACAC,UAAAA,KAAK,CAACC,SAAN,CAAgBf,IAAhB,CAAqBgB,KAArB,CAA2BN,KAAK,CAACjB,IAAN,CAAWmB,IAAtC,EAA4CD,KAAK,CAAClB,IAAlD;AACAnB,UAAAA,aAAa,CAACoC,KAAK,CAACjB,IAAN,CAAWmB,IAAZ,CAAb;AACA,gBAAMC,KAAN;AACH,SALO,CAfF,CAAN;AAqBH;;AAAC,UAAItC,QAAQ,KAAK,UAAjB,EAA6B;AAC3B,eACI2B,KAAK,CAAC,uBAAD,CADT;AAGH;AACJ;AAEJ,GAvED;;AAyEA,WAASe,cAAT,GAA0B;AACtB,QAAIxC,UAAU,KAAK,IAAnB,EAAyB;AACrBC,MAAAA,aAAa,CAAC,KAAD,CAAb;AACH,KAFD,MAEO;AACHA,MAAAA,aAAa,CAAC,IAAD,CAAb;AACH;AACJ;;AAED,QAAMwC,YAAY,GAAIC,KAAD,IAAW;AAC5BvC,IAAAA,QAAQ,CAACuC,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR;AACAvB,IAAAA,OAAO,CAACC,GAAR,CAAYpB,KAAZ;AACD,GAHH;;AAME,WAAS2C,SAAT,GAAqB;AACnBtC,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD;;AAED,WAASuC,UAAT,GAAsB;AACpBvC,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD;;AAED,WAASwC,YAAT,CAAsBC,CAAtB,EAAyB;AACvBA,IAAAA,CAAC,CAACC,cAAF;AACD;;AAED,WAASC,aAAT,CAAuBF,CAAvB,EAAyB;AACrB3B,IAAAA,OAAO,CAACC,GAAR,CAAY0B,CAAC,CAACL,MAAF,CAASC,KAArB;AACH;;AAEH,sBACI;AAAA,4BACA,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YADA,eAEA,QAAC,SAAD;AAAW,MAAA,SAAS,EAAC,MAArB;AAAA,8BACA,QAAC,UAAD;AAAY,QAAA,SAAS,EAAC,MAAtB;AAAA,gCACI,QAAC,cAAD;AACA,UAAA,OAAO,EAAExC,aADT;AAEA,UAAA,KAAK,EAAEN,QAFP;AAGA,UAAA,EAAE,EAAC,wBAHH;AAAA,kCAKA,QAAC,QAAD,CAAU,IAAV;AAAe,YAAA,IAAI,EAAC,GAApB;AAAwB,YAAA,OAAO,EAAE,MAAM;AACnCC,cAAAA,WAAW,CAAC,YAAD,CAAX;AACAM,cAAAA,gBAAgB,CAAC,iBAAD,CAAhB;AACC,aAHL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALA,eASA,QAAC,QAAD,CAAU,IAAV;AAAe,YAAA,IAAI,EAAC,GAApB;AAAwB,YAAA,OAAO,EAAE,MAAM;AACnCN,cAAAA,WAAW,CAAC,SAAD,CAAX;AACAM,cAAAA,gBAAgB,CAAC,iBAAD,CAAhB;AACC,aAHL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATA,eAaA,QAAC,QAAD,CAAU,IAAV;AAAe,YAAA,IAAI,EAAC,GAApB;AAAwB,YAAA,OAAO,EAAE,MAAM;AACnCN,cAAAA,WAAW,CAAC,MAAD,CAAX;AACAM,cAAAA,gBAAgB,CAAC,iBAAD,CAAhB;AACH,aAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAmBI,QAAC,eAAD;AAAiB,wBAAW,iCAA5B;AAA8D,UAAA,WAAW,EAAC,WAA1E;AAAsF,UAAA,QAAQ,EAAG2C,CAAD,IAAMrD,SAAS,CAACqD,CAAC,CAACL,MAAF,CAASC,KAAV;AAA/G;AAAA;AAAA;AAAA;AAAA,gBAnBJ,eAoBI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAEpB,cAAjB;AAAiC,UAAA,OAAO,EAAC,WAAzC;AAAqD,UAAA,KAAK,EAAC,SAA3D;AAAqE,UAAA,gBAAgB,MAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBApBJ,eAqBI,QAAC,UAAD;AAAY,wBAAW,QAAvB;AAAgC,UAAA,OAAO,EAAEqB,SAAzC;AAAA,iCACI,QAAC,YAAD;AAAc,YAAA,KAAK,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eA4BI;AAAA,+BACA,QAAC,KAAD;AAAO,UAAA,IAAI,EAAEvC,IAAb;AAAmB,UAAA,MAAM,EAAEwC,UAA3B;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,QAAQ,EAAEC,YAAhB;AAAA,oCACA,QAAC,KAAD,CAAO,IAAP;AAAA,qCACQ,QAAC,WAAD;AAAa,gBAAA,SAAS,EAAC,UAAvB;AAAA,wCACI,QAAC,SAAD;AAAW,kBAAA,SAAS,EAAC,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEA,QAAC,UAAD;AAAa,gCAAW,QAAxB;AAAiC,kBAAA,IAAI,EAAC,UAAtC;AAAiD,kBAAA,KAAK,EAAE7C,KAAxD;AAA+D,kBAAA,QAAQ,EAAEuC,YAAzE;AAAA,0CACI,QAAC,gBAAD;AAAmB,oBAAA,KAAK,EAAC,WAAzB;AAAqC,oBAAA,OAAO,eAAE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,4BAA9C;AAAyD,oBAAA,KAAK,EAAC;AAA/D;AAAA;AAAA;AAAA;AAAA,0BADJ,eAEI,QAAC,gBAAD;AAAkB,oBAAA,KAAK,EAAC,UAAxB;AAAmC,oBAAA,OAAO,eAAE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,4BAA5C;AAAwD,oBAAA,KAAK,EAAC;AAA9D;AAAA;AAAA;AAAA;AAAA,0BAFJ,eAGI,QAAC,gBAAD;AAAkB,oBAAA,KAAK,EAAC,OAAxB;AAAgC,oBAAA,OAAO,eAAE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,4BAAzC;AAAqD,oBAAA,KAAK,EAAC;AAA3D;AAAA;AAAA;AAAA;AAAA,0BAHJ,eAII,QAAC,gBAAD;AAAkB,oBAAA,KAAK,EAAC,OAAxB;AAAgC,oBAAA,OAAO,eAAE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,4BAAzC;AAAqD,oBAAA,KAAK,EAAC;AAA3D;AAAA;AAAA;AAAA;AAAA,0BAJJ,eAKI,QAAC,gBAAD;AAAkB,oBAAA,KAAK,EAAC,SAAxB;AAAkC,oBAAA,OAAO,eAAE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,4BAA3C;AAAuD,oBAAA,KAAK,EAAC;AAA7D;AAAA;AAAA;AAAA;AAAA,0BALJ,eAMI,QAAC,gBAAD;AAAkB,oBAAA,KAAK,EAAC,YAAxB;AAAqC,oBAAA,OAAO,eAAE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,4BAA9C;AAA0D,oBAAA,KAAK,EAAC;AAAhE;AAAA;AAAA;AAAA;AAAA,0BANJ,eAOI,QAAC,gBAAD;AAAkB,oBAAA,KAAK,EAAC,UAAxB;AAAmC,oBAAA,OAAO,eAAE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,4BAA5C;AAAwD,oBAAA,KAAK,EAAC;AAA9D;AAAA;AAAA;AAAA;AAAA,0BAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AADR;AAAA;AAAA;AAAA;AAAA,oBADA,eAeA,QAAC,KAAD,CAAO,MAAP;AAAA,qCACE,QAAC,UAAD;AAAY,gBAAA,OAAO,EAAC,SAApB;AAA8B,gBAAA,IAAI,EAAC,QAAnC;AAA4C,gBAAA,OAAO,EAAEK,UAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADA,uBA5BJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFA,eA2DA,QAAC,SAAD;AAAA,gBAEQlD,UAAU,gBACV,QAAC,YAAD;AAAc,QAAA,UAAU,EAAEA;AAA1B;AAAA;AAAA;AAAA;AAAA,cADU,gBACiC;AAAA;AAAA;AAAA;AAAA;AAHnD;AAAA;AAAA;AAAA;AAAA,YA3DA;AAAA,kBADJ;AAoEH;;GApNQN,U;;KAAAA,U;AAsNT,eAAeA,UAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { Container, InputGroup, Dropdown, DropdownButton, FormControl as FormControlBoot } from 'react-bootstrap'\r\nimport {Button, IconButton, Select, MenuItem, InputLabel} from '@material-ui/core'\r\nimport ListSearches from '../page components/ListSearches'\r\nimport NavBar from '../page components/NavBar'\r\nimport { Button as ButtonBoot, Modal, Form } from \"react-bootstrap\";\r\n\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\n\r\nimport { FormControl, Radio, RadioGroup, FormControlLabel, FormLabel } from '@material-ui/core';\r\n\r\nfunction SearchPage({history}) {\r\n\r\n    const [username, setUsername] = useState(\"\")\r\n    const [search, setSearch] = useState(\"\")\r\n    const [searchTerm, setSearchTerm] = useState()\r\n    const [database, setDatabase] = useState(\"Database\")\r\n    const [filterOpen, setFilterOpen] = useState(false)\r\n    const [radio, setRadio] = useState('firstname');\r\n    const [databaseColor, setDatabaseColor] = useState(\"outline-secondary\")\r\n    const [open, setOpen] = useState(false)\r\n\r\n    const getCurrentUser = async () => {\r\n        try {\r\n            let currentUser = await axios({\r\n                method: \"GET\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\r\n                },\r\n                url: \"http://localhost:5000/api/private/get/currentuser\",\r\n            })\r\n            \r\n            setUsername(currentUser.data.username)             \r\n        } catch (err) {\r\n            localStorage.removeItem(\"authToken\")\r\n            window.location = \"/\"\r\n            console.log(err)\r\n        }\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        getCurrentUser()\r\n    }, [])\r\n\r\n    useEffect(()=> {\r\n        if(!localStorage.getItem(\"authToken\")) {\r\n            history.push(\"/login\")\r\n        }\r\n    }, [history])\r\n\r\n    const getAllContacts = async () => {\r\n        if (search === \"\") {\r\n            alert(\"Not searching anything!\")\r\n        } else {\r\n            const config = {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\r\n                }\r\n            }\r\n            if (database === \"PostgreSQL\") {\r\n                await axios.all([\r\n                    axios.post(\"/api/private/search/postgresql\", {\r\n                    searchTerm: search,\r\n                    searchQuery: radio\r\n                    }, config),\r\n                    axios.post(\"/api/private/log/search\",{\r\n                        user: username,\r\n                        searchTerm: search,\r\n                        searchQuery: radio,\r\n                        database: database\r\n                    }, config)\r\n            ]).then(axios.spread((data1, data2) => {\r\n                setSearchTerm(data1.data.rows)\r\n                throw data2\r\n            }))} \r\n             if (database === \"MongoDB\") {\r\n                await axios.all([\r\n                    axios.post(\"/api/private/search/mongodb\", {\r\n                    searchTerm: search,\r\n                    searchQuery: radio\r\n                    }, config),\r\n                    axios.post(\"/api/private/log/search\",{\r\n                        user: username,\r\n                        searchTerm: search,\r\n                        searchQuery: radio,\r\n                        database: database\r\n                    }, config)\r\n            ]).then(axios.spread((data1, data2) => {\r\n                setSearchTerm(data1.data)\r\n                throw data2\r\n            }))} \r\n            if (database === \"Both\") {\r\n                await axios.all([\r\n                    axios.post(\"/api/private/search/postgresql\", {\r\n                            searchTerm: search,\r\n                            searchQuery: radio\r\n                        }, config),\r\n                    axios.post(\"/api/private/search/mongodb\", {\r\n                            searchTerm: search,\r\n                            searchQuery: radio\r\n                        }, config),\r\n                    axios.post(\"/api/private/log/search\", {\r\n                        user: username,\r\n                        searchTerm: search,\r\n                        searchQuery: radio,\r\n                        database: database                    \r\n                    }, config)\r\n                ]).then(axios.spread((data1, data2, data3)=> {\r\n                    // combines both array's\r\n                    Array.prototype.push.apply(data1.data.rows, data2.data);\r\n                    setSearchTerm(data1.data.rows)\r\n                    throw data3\r\n                }))\r\n            } if (database === \"Database\") {\r\n                return (\r\n                    alert(\"No Database Selected!\")\r\n                )\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    function filterOpenFunc() {\r\n        if (filterOpen === true) {\r\n            setFilterOpen(false)\r\n        } else {\r\n            setFilterOpen(true)\r\n        }\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        setRadio(event.target.value);\r\n        console.log(radio)\r\n      };\r\n\r\n\r\n      function openModal() {\r\n        setOpen(true)\r\n      }\r\n    \r\n      function closeModal() {\r\n        setOpen(false)\r\n      }\r\n    \r\n      function handleSubmit(e) {\r\n        e.preventDefault()\r\n      }\r\n    \r\n      function handleChanges(e){\r\n          console.log(e.target.value)\r\n      }\r\n\r\n    return (\r\n        <>\r\n        <NavBar/>\r\n        <Container className=\"mt-5\">\r\n        <InputGroup className=\"mb-3\">\r\n            <DropdownButton\r\n            variant={databaseColor}\r\n            title={database}\r\n            id=\"input-group-dropdown-1\"\r\n            >\r\n            <Dropdown.Item href=\"#\" onClick={() => {\r\n                setDatabase(\"PostgreSQL\")\r\n                setDatabaseColor(\"outline-primary\")\r\n                }}>PostgreSQL</Dropdown.Item>\r\n            <Dropdown.Item href=\"#\" onClick={() => {\r\n                setDatabase(\"MongoDB\")\r\n                setDatabaseColor(\"outline-success\") \r\n                }}>MongoDB</Dropdown.Item>\r\n            <Dropdown.Item href=\"#\" onClick={() => {\r\n                setDatabase(\"Both\")\r\n                setDatabaseColor(\"outline-warning\")\r\n            }}>Both</Dropdown.Item>\r\n            </DropdownButton>\r\n            <FormControlBoot aria-label=\"Text input with dropdown button\" placeholder=\"Search...\" onChange={(e)=> setSearch(e.target.value)}/> \r\n            <Button onClick={getAllContacts} variant=\"contained\" color=\"primary\" disableElevation>Search</Button>\r\n            <IconButton aria-label=\"filter\" onClick={openModal}>\r\n                <MoreVertIcon color=\"primary\"/>\r\n            </IconButton>\r\n            </InputGroup>\r\n            {/* {\r\n                filterOpen ?  */}\r\n            <>\r\n            <Modal show={open} onHide={closeModal}>\r\n                <Form onSubmit={handleSubmit} >\r\n                <Modal.Body>\r\n                        <FormControl component=\"fieldset\"  >\r\n                            <FormLabel component=\"legend\">Filter By:</FormLabel>\r\n                        <RadioGroup  aria-label=\"filter\" name=\"filterby\" value={radio} onChange={handleChange} >\r\n                            <FormControlLabel  value=\"firstname\" control={<Radio />} label=\"First Name\" />\r\n                            <FormControlLabel value=\"lastname\" control={<Radio  />} label=\"Last Name\" />\r\n                            <FormControlLabel value=\"email\" control={<Radio  />} label=\"Email\" />\r\n                            <FormControlLabel value=\"phone\" control={<Radio  />} label=\"Phone\" />\r\n                            <FormControlLabel value=\"company\" control={<Radio  />} label=\"Company\"  />\r\n                            <FormControlLabel value=\"department\" control={<Radio  />} label=\"Department\" />\r\n                            <FormControlLabel value=\"jobtitle\" control={<Radio  />} label=\"Job Title\" />\r\n                    </RadioGroup>\r\n                 </FormControl>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                  <ButtonBoot variant=\"success\" type=\"submit\" onClick={closeModal}>\r\n                    Apply\r\n                  </ButtonBoot>\r\n                </Modal.Footer>\r\n                </Form>\r\n            </Modal>\r\n          </>\r\n                {/* : <p></p>\r\n            } */}\r\n\r\n        </Container>\r\n        <Container>\r\n            {\r\n                searchTerm ? \r\n                <ListSearches searchTerm={searchTerm} /> : <p></p>\r\n            }\r\n        </Container>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SearchPage\r\n"]},"metadata":{},"sourceType":"module"}